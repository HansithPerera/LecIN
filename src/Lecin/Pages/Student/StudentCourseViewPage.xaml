<?xml version="1.0" encoding="utf-8"?>

<pages:BaseContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:pages="clr-namespace:Lecin.Pages"
             xmlns:models="clr-namespace:SupabaseShared.Models;assembly=SupabaseShared"
             xmlns:student="using:Lecin.PageModels.Student"
             xmlns:fonts="using:Lecin.Resources.Fonts"
             x:DataType="student:StudentCourseViewPageModel"
             x:Class="Lecin.Pages.Student.StudentCourseViewPage">
    <ContentPage.Content>
        <ScrollView>
            <VerticalStackLayout Padding="20" Spacing="15">
                <Label Text="{Binding Course.Name}" HorizontalOptions="Center" FontSize="32" FontAttributes="Bold"/>
                    <Border>
                        <VerticalStackLayout Spacing="10">
                            <Label Text="Streaks" FontSize="24" HorizontalOptions="Center"/>
                            <Grid 
                                Padding="5"
                                ColumnDefinitions="*, Auto, Auto, Auto"
                                ColumnSpacing="5">
                                <Label 
                                    Grid.Column="0"
                                    Text="Your Streak"/>
                                <Label 
                                    Grid.Column="1"
                                    FontSize="24" 
                                    HorizontalOptions="End"
                                    TextColor="OrangeRed" 
                                    Text="{x:Static fonts:FluentUI.fire_24_regular}" FontFamily="{x:Static fonts:FluentUI.FontFamily}"/>
                                <Label 
                                    Grid.Column="2"
                                    HorizontalOptions="End" 
                                       Text="{Binding Streak}"/>
                                <Label 
                                    Grid.Column="3"
                                    Text="Days"></Label>
                            </Grid>
                            <Border Padding="1" HorizontalOptions="Fill" Background="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray200}}"></Border>
                            <CollectionView ItemsSource="{Binding StreaksAllTime}">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate x:DataType="models:CourseStreaksAllTime">
                                        <Grid ColumnDefinitions="Auto, Auto, *"
                                              RowDefinitions="Auto"
                                              ColumnSpacing="5"
                                              Padding="5"
                                              Margin="5">
                                            <Label Grid.Column="0" 
                                                   Text="{Binding FirstName}" FontSize="18"/>
                                            <Label Grid.Column="1" 
                                                   Text="{Binding LastName}" FontSize="18"/>
                                            <HorizontalStackLayout 
                                                Grid.Column="2"
                                                HorizontalOptions="End">
                                                <Label FontSize="24" TextColor="OrangeRed" Text="{x:Static fonts:FluentUI.fire_24_regular}" FontFamily="{x:Static fonts:FluentUI.FontFamily}"/>
                                                <Label Text="{Binding StreakLength}" FontSize="18"/>
                                            </HorizontalStackLayout>
                                        </Grid>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>
                    </Border>
                <Label Text="Your Classes" FontSize="24" HorizontalOptions="Center" Margin="10"/>
                <CollectionView
                    ItemsSource="{Binding Classes}"
                    SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:Class">
                            <Grid ColumnDefinitions="Auto, *, Auto, Auto"
                                  RowDefinitions="Auto, Auto"
                                  ColumnSpacing="10"
                                  Padding="10"
                                  Margin="5">
                                <Label Grid.Column="0" 
                                       Text="{Binding EndTime}" FontSize="18"/>
                                <Label Grid.Column="1" 
                                       Text="{Binding StartTime}" FontSize="18"/>
                                <Label Grid.Column="2"
                                       Text="{Binding Location}" FontSize="18"
                                />
                                <Button Grid.Column="3" 
                                        Text="Manage Class" Clicked="GotoClassView"/>
                            </Grid>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </ScrollView>
    </ContentPage.Content>
</pages:BaseContentPage>